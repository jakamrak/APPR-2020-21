---
title: "Analiza gradbeništva v Sloveniji"
author: "Jaka Mrak"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
runtime: shiny
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE)

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```

```{r rstudio, results='asis'}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```

# Izbira teme

Za projektno nalogo sem si izbral tematiko gradbeništva. Osredotočil se bom na obdobje od leta 2010 do danes, saj se je v tem obdobju, po letu 2010/11, v Sloveniji začela kazati gospodarska kriza tudi v gradbenem sektorju in na nepremičninskem trgu, ki se ga v teji nalogi sicer  ne bom dotaknil. Iskal bom povezave med **skupno površino bodočih stanovanj** (na podlagi izdanih gradbenih dovoljenj) ter **številom le-teh**. Kasneje se bom dotaknil tudi kohezije med **cenami arhitekturnega projektiranja** in **vrednostjo opravljenih gradbenih del** v posameznem letu, analiziral bom **gradbene stroške** skozi leta ter za konec primerjal indeks **povprečne neto plače** z deležem naseljenih stanovanj **brez osnovne infrastrukture** po regijah. V nekaterih primerih podatki niso na voljo za vsako leto, vendar le za vsaki dve  oziroma tri, a to ne bo vplivalo na kasnejšo analizo. 

<center>
![](slike/gradb-naslovna.jpg)

***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz}
source("uvoz/uvoz.r", encoding="UTF-8")
```

Podatke, potrebne za analize sem uvozil iz SURS-a v obliki CSV, xlsx in json. Vse podatke sem prečistil in spremenil v obliko *tidy data* ter tako dobil 7 manjših, urejenih tabel na katerih bom kasneje delal svoje analize.

1. [gradbena.dovoljenja.letno](https://pxweb.stat.si/SiStatData/pxweb/sl/Data/-/1970716S.px/) - podatki o izdanih gradbenih dovoljenjih po statističnih regijah
  - `StatisticnaRegija` - spremenljivka: ime statistične regije (character),
  - `Leto` - spremenljivka: leto meritve (numeric),
  - `SteviloStavb` - meritev: število stavb za katere je bilo v nekem letu izdano gradbeno dovoljenje (numeric),
  - `Povrsina_m2` -meritev: površina stavb za katere je bilo v nekem letu izdano gradbeno dovoljenje (numeric).

2. [gradbena.dovoljenja.sept](https://pxweb.stat.si/SiStatData/pxweb/sl/Data/-/1970712S.px) - podatki o izdanih gradbenih dovoljenjih za mesec september
  - `StatisticnaRegija` - spremenljivka: ime statistične regije (neurejen faktor),
  - `VrstaObjekta` - spremenljivka: pove ali je meritev za stanovanske ali nestanovanjske stavbe (neurejen faktor),
  - `SteviloStavb` - meritev: stevilo stavb za katere je bilo izdano gradbeno dovoljenje (število).
  
  3. [gradbeni.stroski](https://pxweb.stat.si/SiStatData/pxweb/sl/Data/-/1957611S.px/) - letni indeksi gradbenih stroškov
  - `Leto` - spremenljivka: leto meritve (število),
  - `TipStroska` - spremenljivka: pove nam za kateri tip stroška gre (neurejen faktor),
  - `Indeks` - meritev: indeks tega stroška v določenem letu (število).
  
  4. [indeks.cen.arh.proj](https://pxweb.stat.si/SiStatData/pxweb/sl/Data/-/0427601S.px/) - podatki o ceni storitve arhitekturnega projektiranja
  - `Leto` - spremenljivka: leto meritve (število),
  - `PovprecenIndeks` - meritev: povprečen indeks, izračunan iz četrtletnih (število).
  
  5. [indeks.neto.plac](https://pxweb.stat.si/SiStatData/pxweb/sl/Data/-/0772610S.px/) - podatki o neto plačah po statističnih regijah letno
  - `StatisticnaRegija` - spremenljivka: ime statistične regije (neurejen faktor),
  - `Leto` - spremenljivka: leto meritve (število),
  - `Indeks` - meritev: indeks neto plače (število).
  
  6. [stanovanja.brez.os.infra](https://pxweb.stat.si/SiStatData/pxweb/sl/Data/-/0861201S.px/) - podatki o deležih naseljenih stanovanj brez osnovne infrastrukture po statističnih regijah
  - `StatisticnaRegija` - spremenljivka: ime statistične regije (neurejen faktor),
  - `Leto` - spremenljivka:lwto meritve (število),
  - `DelezVOdstotkih` - meritev: delež stanovanj brez osnovne infrastrukture v letu meritve (število).
  
  7. [vrednost.gradb.del](https://pxweb.stat.si/SiStatData/pxweb/sl/Data/-/1919802S.px/)- podatki o vrednosti opravljenih gradbenih del v posameznem letu (v 1000 EUR)
  - `Leto` - spremenljivka: leto meritve (število),
  - `Vrednost_1000EUR` - meritev: vrednost vseh opravljenih gradbenih del v posameznem letu meritve v Sloveniji (število).
  
  8. [dokoncana.stanovanja.st.in.povrsina](https://pxweb.stat.si/SiStatData/pxweb/sl/Data/-/1906910S.px)- podatki o vrednosti opravljenih gradbenih del v posameznem letu (v 1000 EUR)
  - `StatisticnaRegija` - spremenljivka: Regija (neurejen faktor),
  - `Leto` - spremenljivka: leto meritve (število),
  - `StDokoncanihStanovanjNa1000Prebivalcev` - meritev: število vseh dokončanih stanovanj ob koncu leta na 1000 prebivalcev (število).
  - `PovprecnaPovrsina_m2` - meritev: povprečna površina stanovanj v tem letu (število),
  

***

# Analiza in vizualizacija podatkov

```{r vizualizacija, echo=FALSE, message=FALSE, warning=FALSE, results='hide'}
source("vizualizacija/vizualizacija.r", encoding="UTF-8")
```


Prvi graf prikazuje deleže izdanih gradbenih dovoljenj po statističnih regija za mesec september. Iz podatkov o izdanih gradbenih dovoljenjih lahko zelo na grobo napovemo, kaj se bo z fradnjo dogajalo v bližnji prihodnosti, saj večina stavb, za katere se pridobi gradbeno dovoljenje nazadnje dočaka tudi izgradnjo. 
Vidimo lahko, da se daleč najmanj gradi oziroma se bo gradilo v Obalno-kraški regiji, kar je slabo za razvoj tega območja. največ se bo gradilov Jugovzhodni Sloveniji in na Savinjskem, kar je zelo pozitivno za prihodnji razvoj regij. 

```{r graf1, echo=FALSE, fig.align='center'}
graf_tortni
```


Spodnji graf kaže indekse stroškov dela, materiala in skupnih gradbenih stroškov. 
Večino časa je strošek dela najvišji (višji kot strošek materiala in posledično skupni stroški), z izjemo med leti 2013 in 2015, ko se je gradbeništvo znašlo v največji krizi v zadnjem desetletju. Kriza se začne kazati že leta 2011, kar sovpada z začetkom nižanja stroškov gradbenih del. Material se v tem obdobju ne poceni, zanimivo pa je dejstvo, da se material poceni v letu 2020, podatke katerega nisem vključil, saj niso na voljo vsi potrebni podatki (zadnje četrtletje še ni na voljo). Razlog za cenitev stroškov materiala pa je predvsem v vedno manj kvalitetni gradnji, saj vsi investitorji razmišljajo samo o svojem zaslužku, ki ga večajo na račun nižje kakovosti gradnje. 

```{r graf2, echo=FALSE, fig.align='center'}
graf_stroski
```

V tretjem grafu sem primerjal indeks neto plače in delež naseljenih stanovanj brez osnovne infrastrukture po regijah Slovenije. Analizo sem naredil za 3 ločena leta in v vseh primerih je lepo viden trend, ki ga prikazuje tudi padajoča premica, kar pomeni, da je v regijah, kjer so plače nižje, tudi delež stanovanj brez osnovne infrastrukture višji. Rezultati in ugotovitve so pričakovani, saj je najvišji delež takih stanovanj v Pomurski regiji, kjer so tudi plače v popvrečju najnižje. Na drugi strani izstopa Gorenjska, kjer so plače v vseh 3 letih v bližini povprečja Slovenije, delež omenjenih stanovanj pa dalež najnižji. Razlog za to je predvsem ta, da v tej regiji živi veliko ljudi, ki se na delo vozijo v Ljubljano in imajo zato v povprečju boljše tudi življenske pogoje.


```{r graf3, echo=FALSE, fig.align='center'}
graf_infra.in.place
```


```{r graf4, echo=FALSE, fig.align='center'}
graf_gradb.dela.in.arh.proj
```


Spodnji zemljevid prikazuje povprečno velikost družine za vsako občino.

```{r zemljevid, fig.align='center', fig.cap='Zemljevid povprečnega števila otrok v družini'}
#tm_shape(merge(zemljevid, povprecja, by.x="OB_UIME", by.y="obcina")) +
#  tm_polygons("povprecje", title="Povprečje") +
#  tm_layout(title="Povprečno število otrok v družini")
```

***

# Napredna analiza podatkov

```{r analiza}
#source("analiza/analiza.r", encoding="UTF-8")
```





***

#Shiny

```{r shiny, echo=FALSE}
shinyAppDir("shiny", options=list(width="100%", height=600))
```
